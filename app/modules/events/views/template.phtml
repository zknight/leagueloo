<div class="module">
    <div class="title">
    <table style="padding:0;width:100%;">
        <tr>
            <td>Upcoming Events</td>
            <td style="text-align:right;"><?= l("Calendar", Path::event_calendar($this->entity_type, $this->entity_id)); ?></td>
        </tr>
    </table>
    </div>
    <div class="content">
<? foreach ($this->events as $date => $events): ?>
    <strong><?= FormatDateTime($date, "m/d/Y"); ?></strong><br />
    <? foreach ($events as $event): ?>
        <? if ($event->all_day): ?>
        All Day
        <? else: ?>
        <?= FormatDateTime($event->start_time, "H:i"); ?>
        <? endif; ?>
        <? if ($this->show_category): ?>
            <em>(<?=$event->category?>)</em>
        <? endif; ?>
        - <?= l($event->title, Path::event_show($event->id)); ?>
        <br/>
    <? endforeach; ?>
    <br />
<? endforeach; ?>
    </div>
</div>
